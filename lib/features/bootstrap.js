"use strict";

require("source-map-support/register");

const path = require('path');

const Feature = require('../enum/Feature');

const Literal = require('../enum/Literal');

const Util = require('rk-utils');

module.exports = {
  type: Feature.PLUGIN,
  load_: async function (app, options) {
    let bootPath = options.path ? app.toAbsolutePath(options.path) : path.join(app.workingPath, Literal.DEFAULT_BOOTSTRAP_PATH);
    let bp = path.join(bootPath, '**', '*.js');
    let files = await Util.glob(bp, {
      nodir: true
    });
    return Util.eachAsync_(files, async file => {
      let bootstrap = require(file);

      return bootstrap(app);
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy9ib290c3RyYXAuanMiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJGZWF0dXJlIiwiTGl0ZXJhbCIsIlV0aWwiLCJtb2R1bGUiLCJleHBvcnRzIiwidHlwZSIsIlBMVUdJTiIsImxvYWRfIiwiYXBwIiwib3B0aW9ucyIsImJvb3RQYXRoIiwidG9BYnNvbHV0ZVBhdGgiLCJqb2luIiwid29ya2luZ1BhdGgiLCJERUZBVUxUX0JPT1RTVFJBUF9QQVRIIiwiYnAiLCJmaWxlcyIsImdsb2IiLCJub2RpciIsImVhY2hBc3luY18iLCJmaWxlIiwiYm9vdHN0cmFwIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQU9BLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsaUJBQUQsQ0FBdkI7O0FBQ0EsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsaUJBQUQsQ0FBdkI7O0FBQ0EsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsVUFBRCxDQUFwQjs7QUFFQUksTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBTWJDLEVBQUFBLElBQUksRUFBRUwsT0FBTyxDQUFDTSxNQU5EO0FBZWJDLEVBQUFBLEtBQUssRUFBRSxnQkFBZ0JDLEdBQWhCLEVBQXFCQyxPQUFyQixFQUE4QjtBQUNqQyxRQUFJQyxRQUFRLEdBQUdELE9BQU8sQ0FBQ1gsSUFBUixHQUNYVSxHQUFHLENBQUNHLGNBQUosQ0FBbUJGLE9BQU8sQ0FBQ1gsSUFBM0IsQ0FEVyxHQUVYQSxJQUFJLENBQUNjLElBQUwsQ0FBVUosR0FBRyxDQUFDSyxXQUFkLEVBQTJCWixPQUFPLENBQUNhLHNCQUFuQyxDQUZKO0FBSUEsUUFBSUMsRUFBRSxHQUFHakIsSUFBSSxDQUFDYyxJQUFMLENBQVVGLFFBQVYsRUFBb0IsSUFBcEIsRUFBMEIsTUFBMUIsQ0FBVDtBQUVBLFFBQUlNLEtBQUssR0FBRyxNQUFNZCxJQUFJLENBQUNlLElBQUwsQ0FBVUYsRUFBVixFQUFjO0FBQUNHLE1BQUFBLEtBQUssRUFBRTtBQUFSLEtBQWQsQ0FBbEI7QUFFQSxXQUFPaEIsSUFBSSxDQUFDaUIsVUFBTCxDQUFnQkgsS0FBaEIsRUFBdUIsTUFBTUksSUFBTixJQUFjO0FBQ3hDLFVBQUlDLFNBQVMsR0FBR3RCLE9BQU8sQ0FBQ3FCLElBQUQsQ0FBdkI7O0FBQ0EsYUFBT0MsU0FBUyxDQUFDYixHQUFELENBQWhCO0FBQ0gsS0FITSxDQUFQO0FBSUg7QUE1QlksQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBFbmFibGUgYm9vdHN0cmFwIHNjcmlwdHNcbiAqIEBtb2R1bGUgRmVhdHVyZV9Cb290c3RyYXBcbiAqL1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgRmVhdHVyZSA9IHJlcXVpcmUoJy4uL2VudW0vRmVhdHVyZScpO1xuY29uc3QgTGl0ZXJhbCA9IHJlcXVpcmUoJy4uL2VudW0vTGl0ZXJhbCcpO1xuY29uc3QgVXRpbCA9IHJlcXVpcmUoJ3JrLXV0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmZWF0dXJlIGlzIGxvYWRlZCBhdCBwbHVnaW4gc3RhZ2VcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgdHlwZTogRmVhdHVyZS5QTFVHSU4sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBmZWF0dXJlXG4gICAgICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBjbGkgYXBwIG1vZHVsZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBmZWF0dXJlXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25zLnBhdGg9J2Jvb3N0cmFwJ10gLSBUaGUgcGF0aCBvZiB0aGUgYm9vdHN0cmFwIHNjcmlwdHNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48Kj59XG4gICAgICovXG4gICAgbG9hZF86IGFzeW5jIGZ1bmN0aW9uIChhcHAsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGJvb3RQYXRoID0gb3B0aW9ucy5wYXRoID9cbiAgICAgICAgICAgIGFwcC50b0Fic29sdXRlUGF0aChvcHRpb25zLnBhdGgpIDpcbiAgICAgICAgICAgIHBhdGguam9pbihhcHAud29ya2luZ1BhdGgsIExpdGVyYWwuREVGQVVMVF9CT09UU1RSQVBfUEFUSCk7XG5cbiAgICAgICAgbGV0IGJwID0gcGF0aC5qb2luKGJvb3RQYXRoLCAnKionLCAnKi5qcycpO1xuXG4gICAgICAgIGxldCBmaWxlcyA9IGF3YWl0IFV0aWwuZ2xvYihicCwge25vZGlyOiB0cnVlfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gVXRpbC5lYWNoQXN5bmNfKGZpbGVzLCBhc3luYyBmaWxlID0+IHtcbiAgICAgICAgICAgIGxldCBib290c3RyYXAgPSByZXF1aXJlKGZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIGJvb3RzdHJhcChhcHApO1xuICAgICAgICB9KTtcbiAgICB9XG59OyJdfQ==