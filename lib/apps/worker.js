"use strict";

require("source-map-support/register");

const App = require('../App');

function startWorker(workingPath, configName, worker, workerName) {
  let app = new App(workerName || 'Worker', {
    workingPath,
    configName
  });
  app.start_().then(worker).then(() => app.stop_()).catch(error => {
    console.error(error);
    process.exit(1);
  });
}

module.exports = startWorker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHBzL3dvcmtlci5qcyJdLCJuYW1lcyI6WyJBcHAiLCJyZXF1aXJlIiwic3RhcnRXb3JrZXIiLCJ3b3JraW5nUGF0aCIsImNvbmZpZ05hbWUiLCJ3b3JrZXIiLCJ3b3JrZXJOYW1lIiwiYXBwIiwic3RhcnRfIiwidGhlbiIsInN0b3BfIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJwcm9jZXNzIiwiZXhpdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQW5COztBQUVBLFNBQVNDLFdBQVQsQ0FBcUJDLFdBQXJCLEVBQWtDQyxVQUFsQyxFQUE4Q0MsTUFBOUMsRUFBc0RDLFVBQXRELEVBQWtFO0FBRTlELE1BQUlDLEdBQUcsR0FBRyxJQUFJUCxHQUFKLENBQVFNLFVBQVUsSUFBSSxRQUF0QixFQUFnQztBQUN0Q0gsSUFBQUEsV0FEc0M7QUFFdENDLElBQUFBO0FBRnNDLEdBQWhDLENBQVY7QUFLQUcsRUFBQUEsR0FBRyxDQUFDQyxNQUFKLEdBQWFDLElBQWIsQ0FBa0JKLE1BQWxCLEVBQTBCSSxJQUExQixDQUErQixNQUFNRixHQUFHLENBQUNHLEtBQUosRUFBckMsRUFBa0RDLEtBQWxELENBQXdEQyxLQUFLLElBQUk7QUFDN0RDLElBQUFBLE9BQU8sQ0FBQ0QsS0FBUixDQUFjQSxLQUFkO0FBQ0FFLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLENBQWI7QUFDSCxHQUhEO0FBSUg7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmYsV0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBcHAgPSByZXF1aXJlKCcuLi9BcHAnKTtcblxuZnVuY3Rpb24gc3RhcnRXb3JrZXIod29ya2luZ1BhdGgsIGNvbmZpZ05hbWUsIHdvcmtlciwgd29ya2VyTmFtZSkge1xuICAgIC8vIGNyZWF0ZSBhIENsaWVudCBpbnN0YW5jZSB3aXRoIGN1c3RvbSBjb25maWd1cmF0aW9uXG4gICAgbGV0IGFwcCA9IG5ldyBBcHAod29ya2VyTmFtZSB8fCAnV29ya2VyJywge1xuICAgICAgICB3b3JraW5nUGF0aCxcbiAgICAgICAgY29uZmlnTmFtZVxuICAgIH0pO1xuXG4gICAgYXBwLnN0YXJ0XygpLnRoZW4od29ya2VyKS50aGVuKCgpID0+IGFwcC5zdG9wXygpKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhcnRXb3JrZXI7Il19