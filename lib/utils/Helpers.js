"use strict";

require("source-map-support/register");

exports.dependsOn = function (features, app, fromFeature) {
  let hasNotEnabled = _.find(_.castArray(features), feature => !app.enabled(feature));

  if (hasNotEnabled) {
    throw new Error(`"${fromFeature}" feature requires "${hasNotEnabled}" feature to be enabled.`);
  }
};

exports.splitControllerAction = function (actionString) {
  let pos = actionString.lastIndexOf('.');

  if (pos <= 0) {
    throw new Error(`Unrecognized controller.action syntax: ${actionString}.`);
  }

  let controller = actionString.substr(0, pos);
  let action = actionString.substr(pos + 1);
  return {
    controller,
    action
  };
};

exports.tryRequire = function (packageName) {
  function tryRequireBy(packageName, mainModule, throwWhenNotFound) {
    try {
      return mainModule.require(packageName);
    } catch (error) {
      if (error.code === 'MODULE_NOT_FOUND') {
        if (throwWhenNotFound) {
          let pkgPaths = packageName.split('/');
          let npmPkgName = pkgPaths[0];

          if (pkgPaths[0].startsWith('@') && pkgPaths.length > 1) {
            npmPkgName += '/' + pkgPaths[1];
          }

          throw new Error(`Module "${packageName}" not found. Try run "npm install ${npmPkgName}" to install the dependency.`);
        }

        return undefined;
      }

      throw error;
    }
  }

  return tryRequireBy(packageName, module) || tryRequireBy(packageName, require.main, true);
};

exports.withStatus = (Base, STATUS) => {
  var _temp;

  return _temp = class extends Base {
    constructor(...args) {
      super(...args);
      this.status = STATUS;
    }

  }, _temp;
};

exports.withExpose = Base => {
  var _temp2;

  return _temp2 = class extends Base {
    constructor(...args) {
      super(...args);
      this.expose = true;
    }

  }, _temp2;
};

exports.withName = Base => class extends Base {
  constructor(...args) {
    super(...args);
    this.name = this.constructor.name;
  }

};

exports.withExtraInfo = Base => class extends Base {
  constructor(...args) {
    super(...args);
    let expectedNumArgs = super.constructor.length;

    if (args.length > expectedNumArgs) {
      let extra = args.slice(expectedNumArgs);
      this.extraInfo = extra.length > 1 ? extra : extra[0];
    }
  }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9IZWxwZXJzLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJkZXBlbmRzT24iLCJmZWF0dXJlcyIsImFwcCIsImZyb21GZWF0dXJlIiwiaGFzTm90RW5hYmxlZCIsIl8iLCJmaW5kIiwiY2FzdEFycmF5IiwiZmVhdHVyZSIsImVuYWJsZWQiLCJFcnJvciIsInNwbGl0Q29udHJvbGxlckFjdGlvbiIsImFjdGlvblN0cmluZyIsInBvcyIsImxhc3RJbmRleE9mIiwiY29udHJvbGxlciIsInN1YnN0ciIsImFjdGlvbiIsInRyeVJlcXVpcmUiLCJwYWNrYWdlTmFtZSIsInRyeVJlcXVpcmVCeSIsIm1haW5Nb2R1bGUiLCJ0aHJvd1doZW5Ob3RGb3VuZCIsInJlcXVpcmUiLCJlcnJvciIsImNvZGUiLCJwa2dQYXRocyIsInNwbGl0IiwibnBtUGtnTmFtZSIsInN0YXJ0c1dpdGgiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJtYWluIiwid2l0aFN0YXR1cyIsIkJhc2UiLCJTVEFUVVMiLCJzdGF0dXMiLCJ3aXRoRXhwb3NlIiwiZXhwb3NlIiwid2l0aE5hbWUiLCJjb25zdHJ1Y3RvciIsImFyZ3MiLCJuYW1lIiwid2l0aEV4dHJhSW5mbyIsImV4cGVjdGVkTnVtQXJncyIsImV4dHJhIiwic2xpY2UiLCJleHRyYUluZm8iXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBWUFBLE9BQU8sQ0FBQ0MsU0FBUixHQUFvQixVQUFVQyxRQUFWLEVBQW9CQyxHQUFwQixFQUF5QkMsV0FBekIsRUFBc0M7QUFDdEQsTUFBSUMsYUFBYSxHQUFHQyxDQUFDLENBQUNDLElBQUYsQ0FBT0QsQ0FBQyxDQUFDRSxTQUFGLENBQVlOLFFBQVosQ0FBUCxFQUE4Qk8sT0FBTyxJQUFJLENBQUNOLEdBQUcsQ0FBQ08sT0FBSixDQUFZRCxPQUFaLENBQTFDLENBQXBCOztBQUVBLE1BQUlKLGFBQUosRUFBbUI7QUFDZixVQUFNLElBQUlNLEtBQUosQ0FBVyxJQUFH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ZUFBZSxHQUFHLE1BQU1KLFdBQU4sQ0FBa0JYLE1BQXhDOztBQUVBLFFBQUlZLElBQUksQ0FBQ1osTUFBTCxHQUFjZSxlQUFsQixFQUFtQztBQUMvQixVQUFJQyxLQUFLLEdBQUdKLElBQUksQ0FBQ0ssS0FBTCxDQUFXRixlQUFYLENBQVo7QUFNQSxXQUFLRyxTQUFMLEdBQWlCRixLQUFLLENBQUNoQixNQUFOLEdBQWUsQ0FBZixHQUFtQmdCLEtBQW5CLEdBQTJCQSxLQUFLLENBQUMsQ0FBRCxDQUFqRDtBQUNIO0FBQ0o7O0FBZmdELENBQXJEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogQ29tbW9uIGhlbHBlcnMgZm9yIHNlcnZpY2UgY29udGFpbmVyLlxuICogQG1vZHVsZSBIZWxwZXJzXG4gKi8gXG5cbiAvKipcbiAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheS48c3RyaW5nPn0gZmVhdHVyZXMgLSBEZXBlbmRlbmNpZXMgb2Ygb3RoZXIgZmVhdHVyZXMuXG4gICogQHBhcmFtIHtTZXJ2aWNlQ29udGFpbmVyfSBhcHAgLSBPcmlnaW4gc2VydmljZSBjb250YWluZXIgYXBwLlxuICAqIEBwYXJhbSB7c3RyaW5nfSBmcm9tRmVhdHVyZSAtIERlcGVuZGVudCBmZWF0dXJlLlxuICAqL1xuZXhwb3J0cy5kZXBlbmRzT24gPSBmdW5jdGlvbiAoZmVhdHVyZXMsIGFwcCwgZnJvbUZlYXR1cmUpIHtcbiAgICBsZXQgaGFzTm90RW5hYmxlZCA9IF8uZmluZChfLmNhc3RBcnJheShmZWF0dXJlcyksIGZlYXR1cmUgPT4gIWFwcC5lbmFibGVkKGZlYXR1cmUpKTtcblxuICAgIGlmIChoYXNOb3RFbmFibGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke2Zyb21GZWF0dXJlfVwiIGZlYXR1cmUgcmVxdWlyZXMgXCIke2hhc05vdEVuYWJsZWR9XCIgZmVhdHVyZSB0byBiZSBlbmFibGVkLmApO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuc3BsaXRDb250cm9sbGVyQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvblN0cmluZykge1xuICAgIGxldCBwb3MgPSBhY3Rpb25TdHJpbmcubGFzdEluZGV4T2YoJy4nKTtcbiAgICBpZiAocG9zIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgY29udHJvbGxlci5hY3Rpb24gc3ludGF4OiAke2FjdGlvblN0cmluZ30uYCk7XG4gICAgfVxuXG4gICAgbGV0IGNvbnRyb2xsZXIgPSBhY3Rpb25TdHJpbmcuc3Vic3RyKDAsIHBvcyk7XG4gICAgbGV0IGFjdGlvbiA9IGFjdGlvblN0cmluZy5zdWJzdHIocG9zICsgMSk7XG5cbiAgICByZXR1cm4geyBjb250cm9sbGVyLCBhY3Rpb24gfTtcbn07XG5cbi8qKlxuICogVHJ5IHJlcXVpcmUgYSBwYWNrYWdlIG1vZHVsZSBhbmQgc2hvdyBpbnN0YWxsIHRpcHMgaWYgbm90IGZvdW5kLlxuICogQHBhcmFtIHtzdHJpbmd9IHBhY2thZ2VOYW1lXG4gKi9cbmV4cG9ydHMudHJ5UmVxdWlyZSA9IGZ1bmN0aW9uIChwYWNrYWdlTmFtZSkge1xuXG4gICAgZnVuY3Rpb24gdHJ5UmVxdWlyZUJ5KHBhY2thZ2VOYW1lLCBtYWluTW9kdWxlLCB0aHJvd1doZW5Ob3RGb3VuZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG1haW5Nb2R1bGUucmVxdWlyZShwYWNrYWdlTmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ01PRFVMRV9OT1RfRk9VTkQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRocm93V2hlbk5vdEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwa2dQYXRocyA9IHBhY2thZ2VOYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBucG1Qa2dOYW1lID0gcGtnUGF0aHNbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwa2dQYXRoc1swXS5zdGFydHNXaXRoKCdAJykgJiYgcGtnUGF0aHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbnBtUGtnTmFtZSArPSAnLycgKyBwa2dQYXRoc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTW9kdWxlIFwiJHtwYWNrYWdlTmFtZX1cIiBub3QgZm91bmQuIFRyeSBydW4gXCJucG0gaW5zdGFsbCAke25wbVBrZ05hbWV9XCIgdG8gaW5zdGFsbCB0aGUgZGVwZW5kZW5jeS5gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnlSZXF1aXJlQnkocGFja2FnZU5hbWUsIG1vZHVsZSkgfHwgdHJ5UmVxdWlyZUJ5KHBhY2thZ2VOYW1lLCByZXF1aXJlLm1haW4sIHRydWUpO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgc3RhdHVzIHByb3BlcnR5IHRvIHRoZSBjbGFzcy5cbiAqIEBtaXhpblxuICogQHBhcmFtIHsqfSBCYXNlIFxuICogQHBhcmFtIHsqfSBTVEFUVVMgXG4gKi9cbmV4cG9ydHMud2l0aFN0YXR1cyA9IChCYXNlLCBTVEFUVVMpID0+IGNsYXNzIGV4dGVuZHMgQmFzZSB7XG4gICAgLyoqXG4gICAgICogU3RhdHVzIGNvZGUuXG4gICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAqL1xuICAgIHN0YXR1cyA9IFNUQVRVUztcbn07XG5cbi8qKlxuICogQWRkIGEgZXhwb3NlIHByb3BlcnR5IHRvIHRoZSBlcnJvciBvYmplY3QuXG4gKiBAbWl4aW5cbiAqIEBwYXJhbSB7Kn0gQmFzZSBcbiAqL1xuZXhwb3J0cy53aXRoRXhwb3NlID0gKEJhc2UpID0+IGNsYXNzIGV4dGVuZHMgQmFzZSB7XG4gICAgZXhwb3NlID0gdHJ1ZTsgICAgXG59O1xuXG4vKipcbiAqIEFkZCBhIG5hbWUgcHJvcGVydHkgb2Ygd2hpY2ggdGhlIHZhbHVlIGlzIHRoZSBjbGFzcyBuYW1lLlxuICogQG1peGluXG4gKiBAcGFyYW0geyp9IEJhc2UgXG4gKi9cbmV4cG9ydHMud2l0aE5hbWUgPSAoQmFzZSkgPT4gY2xhc3MgZXh0ZW5kcyBCYXNlIHsgICAgXG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICBzdXBlciguLi5hcmdzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgbmFtZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIH0gICAgXG59O1xuXG4vKipcbiAqIEFkZCBhbiBleHRyYUluZm8gcHJvcGVydHkgYW5kIHBhc3NlZCBpbiBieSBleHRyYSBjb25zdHJ1dG9yIGFyZ3VtZW50cy5cbiAqIEBtaXhpblxuICogQHBhcmFtIHsqfSBCYXNlIFxuICovXG5leHBvcnRzLndpdGhFeHRyYUluZm8gPSAoQmFzZSkgPT4gY2xhc3MgZXh0ZW5kcyBCYXNlIHsgICAgXG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICBzdXBlciguLi5hcmdzKTtcblxuICAgICAgICBsZXQgZXhwZWN0ZWROdW1BcmdzID0gc3VwZXIuY29uc3RydWN0b3IubGVuZ3RoO1xuXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IGV4cGVjdGVkTnVtQXJncykge1xuICAgICAgICAgICAgbGV0IGV4dHJhID0gYXJncy5zbGljZShleHBlY3RlZE51bUFyZ3MpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEV4dHJhIGVycm9yIGluZm8uXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuZXh0cmFJbmZvID0gZXh0cmEubGVuZ3RoID4gMSA/IGV4dHJhIDogZXh0cmFbMF07XG4gICAgICAgIH1cbiAgICB9XG59OyJdfQ==